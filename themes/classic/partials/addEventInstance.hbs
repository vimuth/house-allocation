
<form id="myform" name="newEventInstance">
	<font size="5">New Event Instance</font>
	<br/><br/>
	<table id="eventInstance" class="styledLeft">

		<!--  		<th colspan="2"><font size="5">New Event Instance</font></th>-->


		<thead>


		</thead>
		<tbody>
			
			<tr>
				<td style="width: 150px;">Event Name :</td>
				<td></td>
				<td><select name="events" id="events"
					onchange="getActivitiesAndAwards()">
						<option value="select an event" style="width: 320px;">Select an
							Event</option>

						<script type="text/javascript">

						 var sel = document.getElementById('events');  
						 	{{#each event_name}}
						 		var opt = document.createElement('option');
						 	    opt.innerHTML = "{{name}}";
						 	    opt.value = "{{name}}";
						 	    sel.appendChild(opt);
						 	{{/each}}


							</script>

				</select> <a href="{{url " /addEvent.jag"}} " style="margin-left: 5px;">New
						Event?</a></td>
			</tr>


		</tbody>
	</table>
</form>

<div style="padding-top: 10px; display: none;" id="activitySection">
	Activities :
	<table class="table" id="activityTable">

		<thead>
			<tr>
				<th>Name</th>
				<th>Description</th>
				<th>Type</th>
			</tr>
		</thead>
		<tbody>

		</tbody>

	</table>
</div>
<div style="padding-top: 10px; display: none;" id="awardSection">
	Awards :
	<table class="table" id="awardTable">
		<thead>
			<tr>
				<th>Name</th>
				<th>Description</th>
				<th>Vote</th>
				<th>Type</th>
			</tr>
		</thead>
		<tbody>

		</tbody>

	</table>
</div>

<script type="text/javascript"> 
	
	var eventInstList = [];
	// var awardList = [];
	
	function showHideCommon() {
        var theDiv = document.getElementById('activitySection');
        theDiv.style.display = "";
        theDiv = document.getElementById('awardSection');
        theDiv.style.display = "";
    }

    function addEventInstance(){
    /*		var eventInstName = document.getElementById('eventInstanceName');
			var eventName = document.getElementById('events').value;
			var eventInstDescription = document.getElementById('eventInstanceDescription').value;
			var eventInstStartDate = document.getElementById('startDate').value;
			var eventInstEndDate = document.getElementById('endDate').value;

			$('#eventInstanceTable > tbody:last').append('<tr><td>'+
					eventName+'</td><td>'+eventInstDescription+'</td></tr>');
			
			var eventInstance = new Object();
			eventInstance.name = eventInstName;
			eventInstance.eventId = 1;
			eventInstance.description = eventInstDescription;
			eventInstance.startDate=eventInstStartDate;
			eventInstance.endDate=eventInstEndDate;

			eventInstList.push(eventInstance);
*/
    }

	function getActivitiesAndAwards() {
		document.location.href = '{{url "/addEventInstanceSelected/"}}' + document.getElementById('events').value;
	}

	function cancel(){
    	document.location.href = '{{url "/"}}';
    }
   /* $(document).ready(function() {

        $('#addButton').click(function() {

        var eventInstName = document.getElementById('eventInstanceName').value;
			var eventName = document.getElementById('events').value;
			var eventInstDescription = document.getElementById('eventInstanceDescription').value;
			var eventInstStartDate = document.getElementById('startDate').value;
			var eventInstEndDate = document.getElementById('endDate').value;

               $.ajax({
              type: "POST",
              contentType: "application/json",
              url: "{{url "/addEventInstance2.jag"}}",
              
              data: JSON.stringify({"eventInstance":{"name": eventInstName,"eventName":eventName, "description":eventInstDescription, "startDate":eventInstStartDate, "endDate":eventInstEndDate}}),
              success: function(msg) {
              }
           });

        });

     });
*/


    $(document).ready(function() {

        $('#addButton').click(function() {

        var eventInstName = document.getElementById('eventInstanceName').value;
			var eventName = document.getElementById('events').value;
			var eventInstDescription = document.getElementById('eventInstanceDescription').value;
			var eventInstStartDate = document.getElementById('startDate').value;
			var eventInstEndDate = document.getElementById('endDate').value;

               $.ajax({
              type: "POST",
              contentType: "application/json",
              url: "{{url "/addEventInstance2.jag"}}",
              
              data: JSON.stringify({"eventInstance":{"name": eventInstName,"eventName":eventName, "description":eventInstDescription, "startDate":eventInstStartDate, "endDate":eventInstEndDate}}),
              success: function(msg) {
              }
           });

        });

        /*$('select[name="events"]').change(function() {

			var eventName = document.getElementById('events').value;
              $.ajax({
				type : "GET",
				contentType : "application/json",
				url : "{{url "/addEventInstanceSelected.jag"}}",

				data : JSON.stringify({"eventName" : eventName}),
				success : function(msg) {
				}
			});

        });*/


     });



    
    </script>







